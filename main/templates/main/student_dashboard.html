<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CampusCare · Student Dashboard</title>
  <!-- Google Fonts + Font Awesome 6 -->
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'DM Sans', sans-serif;
      background: linear-gradient(135deg, #0f2a1c, #1a3a28);
      min-height: 100vh;
      color: white;
      transition: background 0.5s ease;
    }
    
    /* ===== WELCOME SCREEN ===== */
    .welcome-screen {
      text-align: center;
      animation: fadeInUp 0.8s ease;
      padding: 2rem;
      max-width: 800px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .welcome-logo {
      font-size: 5rem;
      color: #E63946;
      margin-bottom: 2rem;
      animation: pulse 2s infinite;
    }
    .welcome-screen h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
    }
    .welcome-screen p {
      font-size: 1.2rem;
      color: #c0d9cc;
      margin-bottom: 2rem;
    }
    .start-btn {
      background: #E63946;
      color: white;
      border: none;
      padding: 1.2rem 3rem;
      border-radius: 60px;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 10px 25px rgba(230,57,70,0.4);
    }
    .start-btn:hover {
      transform: scale(1.05);
      background: #c02f3b;
    }
    
    /* ===== ONBOARDING MODAL (7 steps) ===== */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      backdrop-filter: blur(10px);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
    }
    .modal-overlay.active { display: flex; }
    
    .modal-container {
      background: #11231b;
      border-radius: 40px;
      border: 3px solid #E63946;
      width: 500px;
      max-width: 94vw;
      padding: 2.5rem;
      position: relative;
      box-shadow: 0 30px 60px rgba(230,57,70,0.4);
      animation: modalPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    @keyframes modalPop {
      0% { opacity: 0; transform: scale(0.7) translateY(50px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }
    
    .modal-progress {
      height: 8px;
      background: #2f4a3a;
      border-radius: 10px;
      margin-bottom: 2rem;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background: #E63946;
      width: 0%;
      transition: width 0.5s ease;
    }
    
    .modal-icon {
      font-size: 3rem;
      color: #E63946;
      text-align: center;
      margin-bottom: 1rem;
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .modal-container h2 {
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
      text-align: center;
    }
    
    .modal-subtitle {
      color: #c0d9cc;
      text-align: center;
      margin-bottom: 2rem;
      font-size: 0.95rem;
    }
    
    .modal-form {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .form-group label {
      font-weight: 600;
      color: #c0d9cc;
    }
    
    .form-group input, .form-group select, .form-group textarea {
      padding: 1rem 1.2rem;
      border-radius: 30px;
      border: 2px solid #2f4a3a;
      background: #0e1d15;
      color: white;
      font-size: 1rem;
      outline: none;
      transition: 0.3s;
      width: 100%;
    }
    
    .form-group input:focus, .form-group select:focus {
      border-color: #E63946;
      box-shadow: 0 0 0 4px rgba(230,57,70,0.2);
    }
    
    .option-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
    }
    
    .option-btn {
      flex: 1;
      padding: 1rem;
      border: 2px solid #2f4a3a;
      background: #0e1d15;
      color: white;
      border-radius: 30px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }
    
    .option-btn.selected {
      background: #E63946;
      border-color: #E63946;
      box-shadow: 0 0 20px rgba(230,57,70,0.5);
    }
    
    .modal-footer {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }
    
    .modal-btn {
      padding: 0.8rem 2rem;
      border-radius: 30px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
      border: none;
    }
    
    .btn-next {
      background: #E63946;
      color: white;
    }
    .btn-next:hover { background: #c02f3b; transform: translateX(5px); }
    
    .btn-prev {
      background: transparent;
      color: #c0d9cc;
      border: 2px solid #c0d9cc;
    }
    .btn-prev:hover { background: rgba(255,255,255,0.1); transform: translateX(-5px); }
    
    /* ===== THANK YOU SCREEN ===== */
    .thankyou-screen {
      text-align: center;
      padding: 2rem;
    }
    .thankyou-icon {
      font-size: 5rem;
      color: #28a745;
      margin-bottom: 2rem;
      animation: checkmark 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    @keyframes checkmark {
      0% { transform: scale(0) rotate(-180deg); opacity: 0; }
      100% { transform: scale(1) rotate(0); opacity: 1; }
    }
    .thankyou-screen h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    .thankyou-screen p {
      color: #c0d9cc;
      margin-bottom: 2rem;
    }
    .dashboard-btn {
      background: #E63946;
      color: white;
      border: none;
      padding: 1rem 3rem;
      border-radius: 30px;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: 0.3s;
    }
    .dashboard-btn:hover { transform: scale(1.05); background: #c02f3b; }
    
    /* ===== SUMMARY CARD ===== */
    .summary-card {
      background: #1a3a28;
      border-radius: 20px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    .summary-item {
      display: flex;
      justify-content: space-between;
      padding: 0.8rem 0;
      border-bottom: 1px solid #2f4a3a;
    }
    .summary-item:last-child { border-bottom: none; }
    .summary-label { color: #c0d9cc; }
    .summary-value { font-weight: 600; color: #E63946; }
    
    /* ===== DASHBOARD STYLES ===== */
    .dashboard-container {
      display: flex;
      min-height: 100vh;
      background: #f0f7f3;
      color: #1e2a24;
      display: none;
    }
    
    .sidebar {
      width: 280px;
      background: linear-gradient(180deg, #0f2a1c, #1a3a28);
      color: white;
      padding: 2rem 1.5rem;
      box-shadow: 4px 0 20px rgba(0,0,0,0.2);
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
    }
    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      margin-bottom: 2.5rem;
      font-size: 1.4rem;
      font-weight: 700;
    }
    .sidebar-logo i {
      background: #E63946;
      padding: 0.6rem;
      border-radius: 12px;
    }
    .sidebar-menu {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .sidebar-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.2rem;
      border-radius: 12px;
      color: #c0d9cc;
      transition: all 0.3s;
      cursor: pointer;
      border: none;
      background: transparent;
      width: 100%;
      text-align: left;
      font-size: 1rem;
    }
    .sidebar-item:hover {
      background: rgba(230,57,70,0.15);
      color: white;
    }
    .sidebar-item.active {
      background: #E63946;
      color: white;
      box-shadow: 0 8px 15px rgba(230,57,70,0.3);
    }
    .sidebar-item i { width: 24px; font-size: 1.2rem; }
    
    .main-content {
      flex: 1;
      padding: 2rem;
      overflow-y: auto;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      background: white;
      padding: 1rem 2rem;
      border-radius: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .student-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .student-avatar {
      width: 50px;
      height: 50px;
      background: #E63946;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
    }
    .student-details h3 { font-size: 1.1rem; color: #555; }
    .student-details p { color: #888; font-size: 0.9rem; }
    .student-badge {
      background: #E63946;
      color: white;
      padding: 0.3rem 1rem;
      border-radius: 30px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-left: 1rem;
    }
    .logout-btn {
      background: none;
      border: 2px solid #E63946;
      color: #E63946;
      padding: 0.6rem 1.5rem;
      border-radius: 30px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }
    .logout-btn:hover {
      background: #E63946;
      color: white;
    }
    
    .welcome-banner {
      background: linear-gradient(135deg, #E63946, #ff8a8a);
      color: white;
      padding: 2rem;
      border-radius: 20px;
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
      gap: 2rem;
    }
    .welcome-banner h2 { font-size: 1.8rem; margin-bottom: 0.5rem; }
    .welcome-banner p { opacity: 0.9; }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      margin-bottom: 2.5rem;
    }
    .stat-card {
      background: white;
      padding: 1.5rem;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.05);
      display: flex;
      align-items: center;
      gap: 1rem;
      transition: 0.3s;
    }
    .stat-card:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(230,57,70,0.15); }
    .stat-icon {
      width: 60px;
      height: 60px;
      background: rgba(230,57,70,0.1);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #E63946;
      font-size: 2rem;
    }
    .stat-info h3 { font-size: 1.8rem; color: #1e2a24; }
    .stat-info p { color: #666; }
    
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      margin-bottom: 2.5rem;
    }
    .action-card {
      background: white;
      padding: 1.5rem;
      border-radius: 20px;
      text-align: center;
      cursor: pointer;
      transition: 0.3s;
    }
    .action-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(230,57,70,0.2);
    }
    .action-card i {
      font-size: 2.5rem;
      color: #E63946;
      margin-bottom: 1rem;
    }
    .action-card h3 { font-size: 1.1rem; margin-bottom: 0.3rem; }
    .action-card p { color: #666; font-size: 0.85rem; }
    
    /* ===== PROFESSIONAL COMPLAINT FORM ===== */
    .complaint-section {
      background: white;
      border-radius: 25px;
      padding: 2rem;
      margin-bottom: 2.5rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.05);
    }
    .section-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid #f0f0f0;
      padding-bottom: 1rem;
    }
    .section-header i {
      font-size: 2rem;
      color: #E63946;
      background: rgba(230,57,70,0.1);
      padding: 1rem;
      border-radius: 15px;
    }
    .section-header h3 {
      font-size: 1.5rem;
      color: #1e2a24;
      margin-bottom: 0.2rem;
    }
    .section-header p {
      color: #888;
      font-size: 0.9rem;
    }
    .complaint-form {
      display: grid;
      gap: 1.8rem;
    }
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }
    .form-group label {
      font-weight: 600;
      color: #444;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .form-group label i {
      color: #E63946;
      width: 18px;
    }
    .form-group input, .form-group select, .form-group textarea {
      padding: 1rem 1.2rem;
      border: 2px solid #e0e8e3;
      border-radius: 15px;
      font-family: inherit;
      font-size: 1rem;
      transition: 0.3s;
      background: #ffffff;
      color: #1e2a24;  /* Dark text for visibility */
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      border-color: #E63946;
      outline: none;
      box-shadow: 0 0 0 4px rgba(230,57,70,0.1);
    }
    .form-group textarea {
      resize: vertical;
      min-height: 120px;
    }
    .form-group input[readonly] {
      background: #f0f0f0;
      color: #555;
    }
    .form-hint {
      font-size: 0.85rem;
      color: #888;
      margin-top: 0.3rem;
    }
    .submit-btn {
      background: #E63946;
      color: white;
      border: none;
      padding: 1.2rem;
      border-radius: 15px;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      transition: 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.8rem;
    }
    .submit-btn:hover {
      background: #c02f3b;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(230,57,70,0.3);
    }
    
    /* Complaints List */
    .complaint-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .complaint-item {
      background: #f9fcfb;
      padding: 1.2rem;
      border-radius: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-left: 5px solid;
      transition: 0.3s;
    }
    .complaint-item:hover { transform: translateX(5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    .complaint-item h4 { margin-bottom: 0.3rem; color: #1e2a24; }
    .complaint-item p { color: #666; font-size: 0.9rem; }
    .status-badge {
      padding: 0.3rem 1rem;
      border-radius: 30px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    .status-pending { background: #fff3cd; color: #856404; }
    .status-progress { background: #cce5ff; color: #004085; }
    .status-resolved { background: #d4edda; color: #155724; }
    
    /* Notifications Section */
    .notification-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .notification-item {
      background: #f9fcfb;
      padding: 1.2rem;
      border-radius: 15px;
      display: flex;
      align-items: center;
      gap: 1rem;
      border-left: 5px solid #E63946;
    }
    .notification-icon {
      width: 40px;
      height: 40px;
      background: rgba(230,57,70,0.1);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #E63946;
    }
    .notification-content h4 { margin-bottom: 0.3rem; color: #1e2a24; }
    .notification-content p { color: #666; font-size: 0.9rem; }
    .notification-time { color: #999; font-size: 0.8rem; margin-left: auto; }
    
    /* Track Status Input */
    #trackComplaintId {
      padding: 1rem;
      border-radius: 15px;
      border: 2px solid #e0e8e3;
      background: white;
      color: #1e2a24;
      font-size: 1rem;
    }
    #trackComplaintId:focus {
      border-color: #E63946;
      outline: none;
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    @media (max-width: 900px) {
      .stats-grid, .quick-actions { grid-template-columns: repeat(2,1fr); }
      .form-row { grid-template-columns: 1fr; }
      .sidebar { width: 100%; height: auto; position: relative; }
      .dashboard-container { flex-direction: column; }
    }
  </style>
</head>
<body>
  <!-- WELCOME SCREEN -->
  <div class="welcome-screen" id="welcomeScreen">
    <div class="welcome-logo">
      <i class="fas fa-graduation-cap"></i>
    </div>
    <h1>Welcome to CampusCare</h1>
    <p>Let's set up your profile in just a few steps</p>
    <button class="start-btn" onclick="startOnboarding()">
      <i class="fas fa-arrow-right"></i> Get Started
    </button>
  </div>

  <!-- ONBOARDING MODAL (7 steps) -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal-container" id="modalContainer">
      <div class="modal-progress">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="modal-icon" id="modalIcon">
        <i class="fas fa-user-graduate"></i>
      </div>
      <h2 id="modalTitle">Are you a hosteller?</h2>
      <div class="modal-subtitle" id="modalSubtitle">Step 1 of 7 · Tell us about your accommodation</div>
      
      <div id="modalContent"></div>
      
      <div class="modal-footer">
        <button class="modal-btn btn-prev" id="prevBtn" onclick="prevStep()">
          <i class="fas fa-arrow-left"></i> Previous
        </button>
        <button class="modal-btn btn-next" id="nextBtn" onclick="nextStep()">
          Next <i class="fas fa-arrow-right"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div class="dashboard-container" id="dashboardContainer">
    <aside class="sidebar">
      <div class="sidebar-logo">
        <i class="fas fa-graduation-cap"></i>
        <span>CampusCare · PU</span>
      </div>
      <div class="sidebar-menu">
        <button class="sidebar-item active" onclick="showSection('dashboard', this)">
          <i class="fas fa-home"></i> Dashboard
        </button>
        <button class="sidebar-item" onclick="showSection('new', this)">
          <i class="fas fa-plus-circle"></i> New Complaint
        </button>
        <button class="sidebar-item" onclick="showSection('list', this)">
          <i class="fas fa-list"></i> My Complaints
        </button>
        <button class="sidebar-item" onclick="showSection('track', this)">
          <i class="fas fa-search"></i> Track Status
        </button>
        <button class="sidebar-item" onclick="showSection('profile', this)">
          <i class="fas fa-user"></i> Profile
        </button>
        <button class="sidebar-item" onclick="showSection('notifications', this)">
          <i class="fas fa-bell"></i> Notifications
        </button>
      </div>
    </aside>

    <main class="main-content">
      <div class="top-bar">
        <div class="student-info">
          <div class="student-avatar" id="studentAvatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="student-details" id="studentDetails">
            <h3>Loading...</h3>
            <p>Loading...</p>
          </div>
          <span class="student-badge" id="studentType"></span>
        </div>
        <button class="logout-btn" onclick="logout()">
          <i class="fas fa-sign-out-alt"></i> Logout
        </button>
      </div>

      <div class="welcome-banner" id="welcomeBanner">
        <i class="fas fa-hand-wave" style="font-size: 3rem;"></i>
        <div>
          <h2 id="welcomeMessage">Welcome to CampusCare!</h2>
          <p id="welcomeText">Your personalized dashboard is ready.</p>
        </div>
      </div>

      <div class="stats-grid" id="statsGrid">
        <!-- Stats will be populated by JS -->
      </div>

      <div class="quick-actions">
        <div class="action-card" onclick="showSection('new', document.querySelector('.sidebar-item[onclick*=\"new\"]'))">
          <i class="fas fa-plus-circle"></i>
          <h3>New Complaint</h3>
          <p>File a new issue</p>
        </div>
        <div class="action-card" onclick="showSection('list', document.querySelector('.sidebar-item[onclick*=\"list\"]'))">
          <i class="fas fa-list"></i>
          <h3>My Complaints</h3>
          <p>View all complaints</p>
        </div>
        <div class="action-card" onclick="showSection('track', document.querySelector('.sidebar-item[onclick*=\"track\"]'))">
          <i class="fas fa-search"></i>
          <h3>Track Status</h3>
          <p>Check progress</p>
        </div>
        <div class="action-card" onclick="showSection('notifications', document.querySelector('.sidebar-item[onclick*=\"notifications\"]'))">
          <i class="fas fa-bell"></i>
          <h3>Notifications</h3>
          <p>View updates</p>
        </div>
      </div>

      <!-- Dashboard / New Complaint Section (Professional Redesign) -->
      <div class="complaint-section" id="dashboardSection">
        <div class="section-header">
          <i class="fas fa-pen"></i>
          <div>
            <h3>File a New Complaint</h3>
            <p>Submit your issue and we'll route it to the right department</p>
          </div>
        </div>
        <div class="complaint-form">
          <div class="form-row">
            <div class="form-group">
              <label><i class="fas fa-tag"></i> Category *</label>
              <select id="complaintCategory">
                <option>Hostel (Electricity)</option>
                <option>Hostel (Water)</option>
                <option>Hostel (Wi-Fi)</option>
                <option>Hostel (Cleanliness)</option>
                <option>Classroom Issue</option>
                <option>Library Issue</option>
                <option>Canteen/Food</option>
                <option>Academic</option>
                <option>Transport</option>
                <option>Other</option>
              </select>
            </div>
            <div class="form-group">
              <label><i class="fas fa-map-marker-alt"></i> Location *</label>
              <input type="text" id="complaintLocation" readonly placeholder="Auto-detected from profile">
            </div>
          </div>
          <div class="form-group">
            <label><i class="fas fa-heading"></i> Complaint Title *</label>
            <input type="text" id="complaintTitle" placeholder="E.g., Wi-Fi not working in room">
            <div class="form-hint">Brief but descriptive title</div>
          </div>
          <div class="form-group">
            <label><i class="fas fa-align-left"></i> Detailed Description *</label>
            <textarea id="complaintDesc" placeholder="Please provide complete details of the issue..."></textarea>
            <div class="form-hint">Include specific details like time, location, and any previous communication</div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label><i class="fas fa-exclamation-triangle"></i> Urgency</label>
              <select id="complaintUrgency">
                <option>Normal (within 48 hrs)</option>
                <option>Urgent (within 24 hrs)</option>
                <option>Emergency (immediate)</option>
              </select>
            </div>
            <div class="form-group">
              <label><i class="fas fa-paperclip"></i> Attachment (optional)</label>
              <input type="file" accept="image/*">
            </div>
          </div>
          <button class="submit-btn" onclick="submitComplaint()">
            <i class="fas fa-paper-plane"></i> Submit Complaint
          </button>
        </div>
      </div>

      <!-- My Complaints Section -->
      <div class="complaint-section" id="myComplaintsSection" style="display: none;">
        <div class="section-header">
          <i class="fas fa-list"></i>
          <div>
            <h3>My Complaints</h3>
            <p>Track all your submitted complaints</p>
          </div>
        </div>
        <div class="complaint-list" id="complaintList">
          <!-- Will be populated by JS -->
        </div>
      </div>

      <!-- Track Status Section -->
      <div class="complaint-section" id="trackSection" style="display: none;">
        <div class="section-header">
          <i class="fas fa-search"></i>
          <div>
            <h3>Track Complaint Status</h3>
            <p>Enter your complaint ID to check status</p>
          </div>
        </div>
        <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
          <input type="text" id="trackComplaintId" placeholder="Enter Complaint ID (e.g., CMP-001)">
          <button class="submit-btn" style="width:auto; padding:1rem 2rem;" onclick="trackComplaint()">Track</button>
        </div>
        <div id="trackResult" style="display: none;"></div>
      </div>

      <!-- Profile Section -->
      <div class="complaint-section" id="profileSection" style="display: none;">
        <div class="section-header">
          <i class="fas fa-user"></i>
          <div>
            <h3>My Profile</h3>
            <p>Your personal information</p>
          </div>
        </div>
        <div class="complaint-form" id="profileContent"></div>
      </div>

      <!-- Notifications Section -->
      <div class="complaint-section" id="notificationsSection" style="display: none;">
        <div class="section-header">
          <i class="fas fa-bell"></i>
          <div>
            <h3>Notifications</h3>
            <p>Stay updated on your complaints</p>
          </div>
        </div>
        <div class="notification-list" id="notificationList">
          <!-- Will be populated by JS -->
        </div>
      </div>
    </main>
  </div>

  <script>
    // Student data object
    let studentData = {
      isHosteller: null,
      rollNo: '',
      name: '',
      email: '',
      phone: '',
      hostelName: '',
      floorNo: '',
      roomNo: '',
      rectorName: '',
      branch: '',
      year: '',
      class: ''
    };

    // Sample complaints data
    let complaints = [
      { id: 'CMP-001', title: 'Wi-Fi not working', category: 'Hostel (Wi-Fi)', date: '25 Feb 2026', status: 'pending', location: 'Room 204' },
      { id: 'CMP-002', title: 'Geyser not heating', category: 'Hostel (Electricity)', date: '24 Feb 2026', status: 'progress', location: 'Room 204' },
      { id: 'CMP-003', title: 'Broken fan', category: 'Maintenance', date: '22 Feb 2026', status: 'resolved', location: 'Common Room' }
    ];

    // Sample notifications
    let notifications = [
      { id: 1, title: 'Complaint #CMP-002 is now in progress', message: 'Your geyser issue has been assigned to maintenance', time: '2 hours ago', icon: 'spinner' },
      { id: 2, title: 'Complaint #CMP-003 resolved', message: 'The fan has been repaired successfully', time: '1 day ago', icon: 'check-circle' },
      { id: 3, title: 'New feature available', message: 'You can now attach images to complaints', time: '2 days ago', icon: 'bell' }
    ];

    let currentStep = 1;
    const totalSteps = 7;

    function startOnboarding() {
      document.getElementById('welcomeScreen').style.display = 'none';
      document.getElementById('modalOverlay').classList.add('active');
      currentStep = 1;
      updateModal();
    }

    function updateModal() {
      updateProgress();
      updateModalContent();
      updateNavigation();
    }

    function updateProgress() {
      const progress = (currentStep / totalSteps) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
    }

    function updateModalContent() {
      const contentDiv = document.getElementById('modalContent');
      const titleEl = document.getElementById('modalTitle');
      const subtitleEl = document.getElementById('modalSubtitle');
      const iconEl = document.getElementById('modalIcon');

      switch(currentStep) {
        case 1:
          titleEl.innerText = 'Are you a hosteller?';
          subtitleEl.innerText = 'Step 1 of 7 · Select your accommodation type';
          iconEl.innerHTML = '<i class="fas fa-home"></i>';
          contentDiv.innerHTML = `
            <div class="option-buttons">
              <button class="option-btn ${studentData.isHosteller === true ? 'selected' : ''}" onclick="setHosteller(true)">
                <i class="fas fa-bed"></i> Yes, I'm a hosteller
              </button>
              <button class="option-btn ${studentData.isHosteller === false ? 'selected' : ''}" onclick="setHosteller(false)">
                <i class="fas fa-bus"></i> No, I commute
              </button>
            </div>
          `;
          break;

        case 2:
          titleEl.innerText = 'Personal Information';
          subtitleEl.innerText = 'Step 2 of 7 · Tell us about yourself';
          iconEl.innerHTML = '<i class="fas fa-user"></i>';
          contentDiv.innerHTML = `
            <div class="modal-form">
              <div class="form-group">
                <label><i class="fas fa-user"></i> Full Name *</label>
                <input type="text" id="studentName" placeholder="Enter your full name" value="${studentData.name || ''}">
              </div>
              <div class="form-group">
                <label><i class="fas fa-id-card"></i> Roll Number *</label>
                <input type="text" id="studentRollNo" placeholder="e.g., 2101010101" value="${studentData.rollNo || ''}">
              </div>
            </div>
          `;
          break;

        case 3:
          titleEl.innerText = 'Contact Details';
          subtitleEl.innerText = 'Step 3 of 7 · How can we reach you?';
          iconEl.innerHTML = '<i class="fas fa-envelope"></i>';
          contentDiv.innerHTML = `
            <div class="modal-form">
              <div class="form-group">
                <label><i class="fas fa-envelope"></i> Email *</label>
                <input type="email" id="studentEmail" placeholder="e.g., name@paruluniversity.ac.in" value="${studentData.email || ''}">
              </div>
              <div class="form-group">
                <label><i class="fas fa-phone"></i> Phone Number *</label>
                <input type="tel" id="studentPhone" placeholder="e.g., 9876543210" value="${studentData.phone || ''}">
              </div>
            </div>
          `;
          break;

        case 4:
          if (studentData.isHosteller) {
            titleEl.innerText = 'Hostel Details';
            subtitleEl.innerText = 'Step 4 of 7 · Which hostel do you live in?';
            iconEl.innerHTML = '<i class="fas fa-building"></i>';
            contentDiv.innerHTML = `
              <div class="modal-form">
                <div class="form-group">
                  <label><i class="fas fa-hotel"></i> Hostel Name *</label>
                  <select id="hostelName">
                    <option value="">Select your hostel</option>
                    <option value="Hostel 1" ${studentData.hostelName === 'Hostel 1' ? 'selected' : ''}>Hostel 1 (Girls)</option>
                    <option value="Hostel 2" ${studentData.hostelName === 'Hostel 2' ? 'selected' : ''}>Hostel 2 (Girls)</option>
                    <option value="Hostel 3" ${studentData.hostelName === 'Hostel 3' ? 'selected' : ''}>Hostel 3 (Boys)</option>
                    <option value="Hostel 4" ${studentData.hostelName === 'Hostel 4' ? 'selected' : ''}>Hostel 4 (Boys)</option>
                    <option value="Hostel 5" ${studentData.hostelName === 'Hostel 5' ? 'selected' : ''}>Hostel 5 (Girls)</option>
                    <option value="Hostel 6" ${studentData.hostelName === 'Hostel 6' ? 'selected' : ''}>Hostel 6 (Boys)</option>
                    <option value="Hostel 7" ${studentData.hostelName === 'Hostel 7' ? 'selected' : ''}>Hostel 7 (Boys)</option>
                    <option value="Hostel 11" ${studentData.hostelName === 'Hostel 11' ? 'selected' : ''}>Hostel 11 (International)</option>
                    <option value="Hostel 12" ${studentData.hostelName === 'Hostel 12' ? 'selected' : ''}>Hostel 12 (Girls)</option>
                    <option value="New Boys Hostel" ${studentData.hostelName === 'New Boys Hostel' ? 'selected' : ''}>New Boys Hostel</option>
                  </select>
                </div>
              </div>
            `;
          } else {
            titleEl.innerText = 'Academic Details';
            subtitleEl.innerText = 'Step 4 of 7 · Which branch are you in?';
            iconEl.innerHTML = '<i class="fas fa-book"></i>';
            contentDiv.innerHTML = `
              <div class="modal-form">
                <div class="form-group">
                  <label><i class="fas fa-code-branch"></i> Branch *</label>
                  <select id="studentBranch">
                    <option value="">Select your branch</option>
                    <option value="Computer Engineering" ${studentData.branch === 'Computer Engineering' ? 'selected' : ''}>Computer Engineering</option>
                    <option value="Information Technology" ${studentData.branch === 'Information Technology' ? 'selected' : ''}>Information Technology</option>
                    <option value="Electronics & Communication" ${studentData.branch === 'Electronics & Communication' ? 'selected' : ''}>Electronics & Communication</option>
                    <option value="Mechanical Engineering" ${studentData.branch === 'Mechanical Engineering' ? 'selected' : ''}>Mechanical Engineering</option>
                    <option value="Civil Engineering" ${studentData.branch === 'Civil Engineering' ? 'selected' : ''}>Civil Engineering</option>
                    <option value="Electrical Engineering" ${studentData.branch === 'Electrical Engineering' ? 'selected' : ''}>Electrical Engineering</option>
                    <option value="BBA" ${studentData.branch === 'BBA' ? 'selected' : ''}>BBA</option>
                    <option value="BCA" ${studentData.branch === 'BCA' ? 'selected' : ''}>BCA</option>
                    <option value="Pharmacy" ${studentData.branch === 'Pharmacy' ? 'selected' : ''}>Pharmacy</option>
                  </select>
                </div>
              </div>
            `;
          }
          break;

        case 5:
          if (studentData.isHosteller) {
            titleEl.innerText = 'Room Details';
            subtitleEl.innerText = 'Step 5 of 7 · Where do you stay?';
            iconEl.innerHTML = '<i class="fas fa-door-open"></i>';
            contentDiv.innerHTML = `
              <div class="modal-form">
                <div class="form-group">
                  <label><i class="fas fa-layer-group"></i> Floor Number *</label>
                  <select id="floorNo">
                    <option value="">Select floor</option>
                    <option value="Ground" ${studentData.floorNo === 'Ground' ? 'selected' : ''}>Ground Floor</option>
                    <option value="1" ${studentData.floorNo === '1' ? 'selected' : ''}>1st Floor</option>
                    <option value="2" ${studentData.floorNo === '2' ? 'selected' : ''}>2nd Floor</option>
                    <option value="3" ${studentData.floorNo === '3' ? 'selected' : ''}>3rd Floor</option>
                    <option value="4" ${studentData.floorNo === '4' ? 'selected' : ''}>4th Floor</option>
                    <option value="5" ${studentData.floorNo === '5' ? 'selected' : ''}>5th Floor</option>
                  </select>
                </div>
                <div class="form-group">
                  <label><i class="fas fa-door-closed"></i> Room Number *</label>
                  <input type="text" id="roomNo" placeholder="e.g., 204" value="${studentData.roomNo || ''}">
                </div>
              </div>
            `;
          } else {
            titleEl.innerText = 'Class Details';
            subtitleEl.innerText = 'Step 5 of 7 · Which year/class?';
            iconEl.innerHTML = '<i class="fas fa-users"></i>';
            contentDiv.innerHTML = `
              <div class="modal-form">
                <div class="form-group">
                  <label><i class="fas fa-calendar"></i> Year *</label>
                  <select id="studentYear">
                    <option value="">Select year</option>
                    <option value="1st Year" ${studentData.year === '1st Year' ? 'selected' : ''}>1st Year</option>
                    <option value="2nd Year" ${studentData.year === '2nd Year' ? 'selected' : ''}>2nd Year</option>
                    <option value="3rd Year" ${studentData.year === '3rd Year' ? 'selected' : ''}>3rd Year</option>
                    <option value="4th Year" ${studentData.year === '4th Year' ? 'selected' : ''}>4th Year</option>
                  </select>
                </div>
                <div class="form-group">
                  <label><i class="fas fa-chalkboard"></i> Class/Division *</label>
                  <input type="text" id="studentClass" placeholder="e.g., CE-A" value="${studentData.class || ''}">
                </div>
              </div>
            `;
          }
          break;

        case 6:
          if (studentData.isHosteller) {
            titleEl.innerText = 'Rector Information';
            subtitleEl.innerText = 'Step 6 of 7 · Who is your rector?';
            iconEl.innerHTML = '<i class="fas fa-user-tie"></i>';
            contentDiv.innerHTML = `
              <div class="modal-form">
                <div class="form-group">
                  <label><i class="fas fa-user-tie"></i> Rector's Name *</label>
                  <input type="text" id="rectorName" placeholder="Enter rector's name" value="${studentData.rectorName || ''}">
                </div>
              </div>
            `;
          } else {
            currentStep = 7;
            updateModal();
            return;
          }
          break;

        case 7:
          titleEl.innerText = 'Review Your Information';
          subtitleEl.innerText = 'Step 7 of 7 · Please verify your details';
          iconEl.innerHTML = '<i class="fas fa-check-circle"></i>';
          
          let summaryHTML = '<div class="summary-card">';
          summaryHTML += `<div class="summary-item"><span class="summary-label">Name:</span><span class="summary-value">${studentData.name || 'Not provided'}</span></div>`;
          summaryHTML += `<div class="summary-item"><span class="summary-label">Roll No:</span><span class="summary-value">${studentData.rollNo || 'Not provided'}</span></div>`;
          summaryHTML += `<div class="summary-item"><span class="summary-label">Email:</span><span class="summary-value">${studentData.email || 'Not provided'}</span></div>`;
          summaryHTML += `<div class="summary-item"><span class="summary-label">Phone:</span><span class="summary-value">${studentData.phone || 'Not provided'}</span></div>`;
          
          if (studentData.isHosteller) {
            summaryHTML += `<div class="summary-item"><span class="summary-label">Hostel:</span><span class="summary-value">${studentData.hostelName || 'Not provided'}</span></div>`;
            summaryHTML += `<div class="summary-item"><span class="summary-label">Floor/Room:</span><span class="summary-value">Floor ${studentData.floorNo || '?'}, Room ${studentData.roomNo || '?'}</span></div>`;
            summaryHTML += `<div class="summary-item"><span class="summary-label">Rector:</span><span class="summary-value">${studentData.rectorName || 'Not provided'}</span></div>`;
          } else {
            summaryHTML += `<div class="summary-item"><span class="summary-label">Branch:</span><span class="summary-value">${studentData.branch || 'Not provided'}</span></div>`;
            summaryHTML += `<div class="summary-item"><span class="summary-label">Year/Class:</span><span class="summary-value">${studentData.year || ''} ${studentData.class || ''}</span></div>`;
          }
          
          summaryHTML += '</div>';
          summaryHTML += '<p style="color:#c0d9cc; text-align:center;">Click Finish to see your personalized dashboard</p>';
          
          contentDiv.innerHTML = summaryHTML;
          break;
      }
    }

    function updateNavigation() {
      document.getElementById('prevBtn').style.display = currentStep === 1 ? 'none' : 'block';
      document.getElementById('nextBtn').innerHTML = currentStep === totalSteps ? 
        'Finish <i class="fas fa-check"></i>' : 'Next <i class="fas fa-arrow-right"></i>';
    }

    function setHosteller(value) {
      studentData.isHosteller = value;
      updateModalContent();
    }

    function saveCurrentStep() {
      switch(currentStep) {
        case 2:
          studentData.name = document.getElementById('studentName')?.value || '';
          studentData.rollNo = document.getElementById('studentRollNo')?.value || '';
          break;
        case 3:
          studentData.email = document.getElementById('studentEmail')?.value || '';
          studentData.phone = document.getElementById('studentPhone')?.value || '';
          break;
        case 4:
          if (studentData.isHosteller) {
            studentData.hostelName = document.getElementById('hostelName')?.value || '';
          } else {
            studentData.branch = document.getElementById('studentBranch')?.value || '';
          }
          break;
        case 5:
          if (studentData.isHosteller) {
            studentData.floorNo = document.getElementById('floorNo')?.value || '';
            studentData.roomNo = document.getElementById('roomNo')?.value || '';
          } else {
            studentData.year = document.getElementById('studentYear')?.value || '';
            studentData.class = document.getElementById('studentClass')?.value || '';
          }
          break;
        case 6:
          if (studentData.isHosteller) {
            studentData.rectorName = document.getElementById('rectorName')?.value || '';
          }
          break;
      }
    }

    function nextStep() {
      if (currentStep === 1 && studentData.isHosteller === null) {
        alert('Please select an option');
        return;
      }
      
      if (currentStep === 2) {
        const name = document.getElementById('studentName')?.value;
        const roll = document.getElementById('studentRollNo')?.value;
        if (!name || !roll) {
          alert('Please fill in all required fields');
          return;
        }
      }
      
      if (currentStep === 3) {
        const email = document.getElementById('studentEmail')?.value;
        const phone = document.getElementById('studentPhone')?.value;
        if (!email || !phone) {
          alert('Please fill in all required fields');
          return;
        }
      }
      
      if (currentStep === 4) {
        if (studentData.isHosteller) {
          const hostel = document.getElementById('hostelName')?.value;
          if (!hostel) {
            alert('Please select your hostel');
            return;
          }
        } else {
          const branch = document.getElementById('studentBranch')?.value;
          if (!branch) {
            alert('Please select your branch');
            return;
          }
        }
      }
      
      if (currentStep === 5) {
        if (studentData.isHosteller) {
          const floor = document.getElementById('floorNo')?.value;
          const room = document.getElementById('roomNo')?.value;
          if (!floor || !room) {
            alert('Please fill in floor and room number');
            return;
          }
        } else {
          const year = document.getElementById('studentYear')?.value;
          const studentClass = document.getElementById('studentClass')?.value;
          if (!year || !studentClass) {
            alert('Please fill in year and class');
            return;
          }
        }
      }
      
      if (currentStep === 6 && studentData.isHosteller) {
        const rector = document.getElementById('rectorName')?.value;
        if (!rector) {
          alert('Please enter rector\'s name');
          return;
        }
      }
      
      saveCurrentStep();

      if (currentStep === totalSteps) {
        showThankYou();
      } else {
        currentStep++;
        updateModal();
      }
    }

    function prevStep() {
      saveCurrentStep();
      currentStep--;
      updateModal();
    }

    function showThankYou() {
      document.getElementById('modalOverlay').classList.remove('active');
      
      const thankYouOverlay = document.createElement('div');
      thankYouOverlay.className = 'modal-overlay active';
      thankYouOverlay.id = 'thankYouOverlay';
      thankYouOverlay.innerHTML = `
        <div class="modal-container" style="text-align:center;">
          <div class="thankyou-screen">
            <div class="thankyou-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <h2>Thank You, ${studentData.name || 'Student'}!</h2>
            <p>Your profile has been set up successfully.</p>
            <div class="summary-card" style="margin:2rem 0;">
              <div class="summary-item">
                <span class="summary-label">Roll Number:</span>
                <span class="summary-value">${studentData.rollNo}</span>
              </div>
              <div class="summary-item">
                <span class="summary-label">Type:</span>
                <span class="summary-value">${studentData.isHosteller ? 'Hosteller' : 'Day Scholar'}</span>
              </div>
            </div>
            <button class="dashboard-btn" onclick="showDashboard()">
              <i class="fas fa-arrow-right"></i> Go to Dashboard
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(thankYouOverlay);
    }

    function showDashboard() {
      document.getElementById('thankYouOverlay')?.remove();
      document.getElementById('welcomeScreen').style.display = 'none';
      document.getElementById('dashboardContainer').style.display = 'flex';
      updateDashboard();
    }

    function updateDashboard() {
      document.getElementById('studentDetails').innerHTML = `
        <h3>${studentData.name || 'Student'}</h3>
        <p><i class="fas fa-id-card"></i> ${studentData.rollNo || 'N/A'} · <i class="fas fa-phone"></i> ${studentData.phone || 'N/A'}</p>
      `;

      const typeBadge = document.getElementById('studentType');
      if (studentData.isHosteller) {
        typeBadge.innerHTML = '<i class="fas fa-bed"></i> Hosteller';
        typeBadge.style.background = '#E63946';
      } else {
        typeBadge.innerHTML = '<i class="fas fa-bus"></i> Day Scholar';
        typeBadge.style.background = '#28a745';
      }

      const welcomeMsg = document.getElementById('welcomeMessage');
      const welcomeText = document.getElementById('welcomeText');
      
      if (studentData.isHosteller) {
        welcomeMsg.innerHTML = `Welcome back, ${studentData.name}!`;
        welcomeText.innerHTML = `Hostel ${studentData.hostelName || ''} · Floor ${studentData.floorNo || ''} · Room ${studentData.roomNo || ''}`;
        document.getElementById('complaintLocation').value = 
          `${studentData.hostelName || ''}, Room ${studentData.roomNo || ''}`;
      } else {
        welcomeMsg.innerHTML = `Welcome back, ${studentData.name}!`;
        welcomeText.innerHTML = `${studentData.branch || ''} · ${studentData.year || ''} · ${studentData.class || ''}`;
        document.getElementById('complaintLocation').value = 
          `${studentData.branch || ''} Department, ${studentData.class || ''}`;
      }

      updateStats();
      updateComplaintsList();
      updateProfileSection();
      updateNotifications();
      
      // Show dashboard section by default
      showSection('dashboard', document.querySelector('.sidebar-item'));
    }

    function updateStats() {
      const statsGrid = document.getElementById('statsGrid');
      const pending = complaints.filter(c => c.status === 'pending').length;
      const progress = complaints.filter(c => c.status === 'progress').length;
      const resolved = complaints.filter(c => c.status === 'resolved').length;
      
      statsGrid.innerHTML = `
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-clock"></i></div>
          <div class="stat-info"><h3>${pending}</h3><p>Pending</p></div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-spinner"></i></div>
          <div class="stat-info"><h3>${progress}</h3><p>In Progress</p></div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
          <div class="stat-info"><h3>${resolved}</h3><p>Resolved</p></div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-file-alt"></i></div>
          <div class="stat-info"><h3>${complaints.length}</h3><p>Total</p></div>
        </div>
      `;
    }

    function updateComplaintsList() {
      const listContainer = document.getElementById('complaintList');
      if (!listContainer) return;
      
      let html = '';
      complaints.forEach(complaint => {
        let statusClass = '';
        let statusText = '';
        
        if (complaint.status === 'pending') {
          statusClass = 'status-pending';
          statusText = 'Pending';
        } else if (complaint.status === 'progress') {
          statusClass = 'status-progress';
          statusText = 'In Progress';
        } else {
          statusClass = 'status-resolved';
          statusText = 'Resolved';
        }
        
        html += `
          <div class="complaint-item" style="border-left-color: ${complaint.status === 'pending' ? '#ffc107' : complaint.status === 'progress' ? '#007bff' : '#28a745'}">
            <div>
              <h4>${complaint.title}</h4>
              <p><i class="fas fa-calendar"></i> ${complaint.date} · <i class="fas fa-tag"></i> ${complaint.category} · <i class="fas fa-map-pin"></i> ${complaint.location}</p>
            </div>
            <span class="status-badge ${statusClass}">${statusText}</span>
          </div>
        `;
      });
      
      listContainer.innerHTML = html || '<p style="color:#666; text-align:center;">No complaints yet</p>';
    }

    function updateProfileSection() {
      const profileContent = document.getElementById('profileContent');
      if (!profileContent) return;
      
      let html = '<div style="display:flex; flex-direction:column; gap:1.5rem;">';
      
      html += `
        <div class="form-group">
          <label>Full Name</label>
          <input type="text" value="${studentData.name || ''}" readonly style="background:#f0f0f0; color:#555;">
        </div>
        <div class="form-group">
          <label>Roll Number</label>
          <input type="text" value="${studentData.rollNo || ''}" readonly style="background:#f0f0f0; color:#555;">
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" value="${studentData.email || ''}" readonly style="background:#f0f0f0; color:#555;">
        </div>
        <div class="form-group">
          <label>Phone</label>
          <input type="tel" value="${studentData.phone || ''}" readonly style="background:#f0f0f0; color:#555;">
        </div>
      `;
      
      if (studentData.isHosteller) {
        html += `
          <div class="form-group">
            <label>Hostel</label>
            <input type="text" value="${studentData.hostelName || ''}" readonly style="background:#f0f0f0; color:#555;">
          </div>
          <div class="form-group">
            <label>Floor / Room</label>
            <input type="text" value="Floor ${studentData.floorNo || ''}, Room ${studentData.roomNo || ''}" readonly style="background:#f0f0f0; color:#555;">
          </div>
          <div class="form-group">
            <label>Rector's Name</label>
            <input type="text" value="${studentData.rectorName || ''}" readonly style="background:#f0f0f0; color:#555;">
          </div>
        `;
      } else {
        html += `
          <div class="form-group">
            <label>Branch</label>
            <input type="text" value="${studentData.branch || ''}" readonly style="background:#f0f0f0; color:#555;">
          </div>
          <div class="form-group">
            <label>Year / Class</label>
            <input type="text" value="${studentData.year || ''} ${studentData.class || ''}" readonly style="background:#f0f0f0; color:#555;">
          </div>
        `;
      }
      
      html += '</div>';
      profileContent.innerHTML = html;
    }

    function updateNotifications() {
      const notificationList = document.getElementById('notificationList');
      if (!notificationList) return;
      
      let html = '';
      notifications.forEach(notification => {
        html += `
          <div class="notification-item">
            <div class="notification-icon">
              <i class="fas fa-${notification.icon}"></i>
            </div>
            <div class="notification-content">
              <h4>${notification.title}</h4>
              <p>${notification.message}</p>
            </div>
            <div class="notification-time">${notification.time}</div>
          </div>
        `;
      });
      
      notificationList.innerHTML = html;
    }

    function showSection(section, element) {
      // Hide all sections
      document.getElementById('dashboardSection').style.display = 'none';
      document.getElementById('myComplaintsSection').style.display = 'none';
      document.getElementById('trackSection').style.display = 'none';
      document.getElementById('profileSection').style.display = 'none';
      document.getElementById('notificationsSection').style.display = 'none';
      
      // Show selected section
      if (section === 'dashboard' || section === 'new') {
        document.getElementById('dashboardSection').style.display = 'block';
      } else if (section === 'list') {
        document.getElementById('myComplaintsSection').style.display = 'block';
      } else if (section === 'track') {
        document.getElementById('trackSection').style.display = 'block';
      } else if (section === 'profile') {
        document.getElementById('profileSection').style.display = 'block';
      } else if (section === 'notifications') {
        document.getElementById('notificationsSection').style.display = 'block';
      }
      
      // Update active state in sidebar
      document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
      if (element) element.classList.add('active');
    }

    function submitComplaint() {
      const category = document.getElementById('complaintCategory').value;
      const location = document.getElementById('complaintLocation').value;
      const title = document.getElementById('complaintTitle').value;
      const desc = document.getElementById('complaintDesc').value;
      
      if (!title || !desc) {
        alert('Please fill in title and description');
        return;
      }
      
      const newComplaint = {
        id: 'CMP-' + String(complaints.length + 1).padStart(3, '0'),
        title: title,
        category: category,
        date: new Date().toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' }),
        status: 'pending',
        location: location
      };
      
      complaints.unshift(newComplaint);
      
      // Add notification
      notifications.unshift({
        id: Date.now(),
        title: `Complaint #${newComplaint.id} submitted`,
        message: 'Your complaint has been received and is pending review',
        time: 'Just now',
        icon: 'clock'
      });
      
      alert('Complaint submitted successfully!');
      document.getElementById('complaintTitle').value = '';
      document.getElementById('complaintDesc').value = '';
      
      updateStats();
      updateComplaintsList();
      updateNotifications();
    }

    function trackComplaint() {
      const id = document.getElementById('trackComplaintId').value;
      if (!id) {
        alert('Please enter a complaint ID');
        return;
      }
      
      const complaint = complaints.find(c => c.id === id);
      const trackResult = document.getElementById('trackResult');
      
      if (complaint) {
        let statusClass = complaint.status === 'pending' ? 'status-pending' : 
                        complaint.status === 'progress' ? 'status-progress' : 'status-resolved';
        let statusText = complaint.status === 'pending' ? 'Pending' : 
                        complaint.status === 'progress' ? 'In Progress' : 'Resolved';
        
        trackResult.innerHTML = `
          <div class="complaint-item" style="border-left-color: ${complaint.status === 'pending' ? '#ffc107' : complaint.status === 'progress' ? '#007bff' : '#28a745'}">
            <div>
              <h4>${complaint.id} - ${complaint.title}</h4>
              <p>Status: ${statusText} · Category: ${complaint.category} · Location: ${complaint.location}</p>
            </div>
            <span class="status-badge ${statusClass}">${statusText}</span>
          </div>
        `;
        trackResult.style.display = 'block';
      } else {
        trackResult.innerHTML = '<p style="color:#E63946; padding:1rem; background:#f9fcfb; border-radius:15px;">Complaint not found</p>';
        trackResult.style.display = 'block';
      }
    }

    function logout() {
      studentData = {
        isHosteller: null,
        rollNo: '',
        name: '',
        email: '',
        phone: '',
        hostelName: '',
        floorNo: '',
        roomNo: '',
        rectorName: '',
        branch: '',
        year: '',
        class: ''
      };
      
      document.getElementById('dashboardContainer').style.display = 'none';
      document.getElementById('welcomeScreen').style.display = 'flex';
      currentStep = 1;
    }

    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && document.getElementById('modalOverlay').classList.contains('active')) {
        if (confirm('Are you sure you want to exit? Your progress will be lost.')) {
          document.getElementById('modalOverlay').classList.remove('active');
          document.getElementById('welcomeScreen').style.display = 'flex';
        }
      }
    });
  </script>
</body>
</html>